<div class="container nutrition">
  <div class="row nutrition__header">
    <div class="col-12">
      <h1>Nutrition Analysis</h1>
    </div>
  </div>
  <div class="row nutrition__table">
    <div class="col-12">
      <table class="table table-bordered table-responsive-sm">
        <thead>
          <tr>
            <th scope="col">Quantity</th>
            <th scope="col">Unit</th>
            <th scope="col">Food</th>
            <th scope="col">Calories</th>
            <th scope="col">Weight</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let ingredient of ingredientsDetails">
            <td>{{ ingredient.quantity }}</td>
            <td>{{ ingredient.measure }}</td>
            <td>{{ ingredient.food }}</td>
            <td>{{ ingredient.calories | number: "1.0-0" }} kcal</td>
            <td>{{ ingredient.weight | number: "1.0-0" }} gm</td>
          </tr>
        </tbody>
      </table>
    </div>
  </div>
  <div class="row nutrition__total mb-5">
    <div class="col-12">
      <button
        (click)="viewTotalNutrition()"
        type="button"
        class="btn btn-success"
      >
        Total Nutrition
      </button>
    </div>
  </div>
  <div class="row nutrition__warning mb-3">
    <div class="col-12">
      <div *ngIf="ingredientError" class="alert alert-warning col-12" role="alert">
        This is a warning alert! We cannot calculate the nutrition for some ingredients. The calculated ingredients are in the above table.
        Please check the ingredient spelling or if you have entered correct quantities for the ingredients.
      </div>
    </div>
  </div>
  <div *ngIf="viewTotal" class="row nutrition__daily">
    <div class="col-12">
      <section class="nutrition-facts">
        <header class="nutrition-facts__header">
          <h1 class="nutrition-facts__title">Nutrition Facts</h1>
        </header>
        <table class="nutrition-facts__table">
          <thead>
            <tr>
              <th colspan="3">Amount Per Serving</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <th colspan="2"><b>Calories</b> {{ totalCalories }}</th>
            </tr>
            <tr class="thick-row">
              <td colspan="3" class="small-info">
                <b>% Daily Value*</b>
              </td>
            </tr>
            <tr>
              <th colspan="2"><b>Total Fat</b> {{ totalNutrients.FAT.quantity |  number: "1.1-1"}}  {{ totalNutrients.FAT.unit }}</th>
              <td><b> {{ totalDaily.FAT.quantity |  number: "1.0-0"}}%</b></td>
            </tr>

            <tr>
              <th colspan="2"><b>Cholesterol</b> {{ totalNutrients.CHOLE.quantity |  number: "1.1-1"}}  {{ totalNutrients.CHOLE.unit }} </th>
              <td><b>{{ totalDaily.CHOLE.quantity |  number: "1.0-0"}}%</b></td>
            </tr>
            <tr>
              <th colspan="2"><b>Sodium</b> {{ totalNutrients.NA.quantity |  number: "1.1-1"}}  {{ totalNutrients.NA.unit }}</th>
              <td><b>{{ totalDaily.NA.quantity |  number: "1.0-0"}}%</b></td>
            </tr>
            <tr>  
              <th colspan="2"><b>Total Carbohydrate</b> {{ totalNutrients.CHOCDF.quantity |  number: "1.1-1"}}  {{ totalNutrients.CHOCDF.unit }}</th>
              <td><b>{{ totalDaily.CHOCDF.quantity |  number: "1.0-0"}}%</b></td>
            </tr>
            <tr>
              <th colspan="2"><b>Protein</b> {{ totalNutrients.PROCNT.quantity |  number: "1.1-1"}}  {{ totalNutrients.PROCNT.unit }}</th>
              <td><b>{{ totalDaily.PROCNT.quantity |  number: "1.0-0"}}%</b></td>
            </tr>
            <tr>
              <th colspan="2"><b>Vitamin D</b> {{ totalNutrients.VITD.quantity |  number: "1.1-1"}}  {{ totalNutrients.VITD.unit }}</th>
              <td><b>{{ totalDaily.VITD.quantity |  number: "1.0-0"}}%</b></td>
            </tr>
            <tr>
              <th colspan="2"><b>Calcium</b> {{ totalNutrients.CA.quantity |  number: "1.1-1"}}  {{ totalNutrients.CA.unit }}</th>
              <td><b>{{ totalDaily.CA.quantity |  number: "1.0-0"}}%</b></td>
            </tr>
            <tr>
              <th colspan="2"><b>Iron</b> {{ totalNutrients.FE.quantity |  number: "1.1-1"}}  {{ totalNutrients.FE.unit }}</th>
              <td><b>{{ totalDaily.FE.quantity |  number: "1.0-0"}}%</b></td>
            </tr>
            <tr>
              <th colspan="2"><b>Potassium</b> {{ totalNutrients.K.quantity |  number: "1.1-1"}}  {{ totalNutrients.K.unit }}</th>
              <td><b>{{ totalDaily.K.quantity |  number: "1.0-0"}}%</b></td>
            </tr>
          </tbody>
        </table>
      </section>
    </div>
  </div>
</div>
